<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Detect Faces Sample</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <style type="text/css">
            #container{
                margin: 0px auto;
                width:500px;
                height: 375px;
                border: 10px #333 solid;
            }
            #videoElement{
                width:500px;
                height:375px;
                background-color:#666;
            }
        
        </style>
    </head>
    <body>
        <script type="text/javascript">
            function processImage() {
                // Replace <Subscription Key> with your valid subscription key.
                var subscriptionKey = "7ed500f43866490cac70644635ff0adb";
            
                var uriBase =
                    "https://hackthe6ix-learn.cognitiveservices.azure.com/face/v1.0/detect";
            
                // Request parameters.
                var params = {
                    "returnFaceId": "true",
                    "returnFaceLandmarks": "false",
                    "returnFaceAttributes":
                        "gender,headPose,smile,facialHair,glasses,emotion," +
                        "hair,makeup,occlusion,accessories,blur,exposure,noise"
                };
            
                // Display the image.
                var sourceImageUrl = document.getElementById("inputImage").value;
                document.querySelector("#sourceImage").src = sourceImageUrl;
            
                // Perform the REST API call.
                $.ajax({
                    url: uriBase + "?" + $.param(params),
            
                    // Request headers.
                    beforeSend: function(xhrObj){
                        xhrObj.setRequestHeader("Content-Type","application/json");
                        xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key", subscriptionKey);
                    },
            
                    type: "POST",
            
                    // Request body.
                    data: '{"url": ' + '"' + sourceImageUrl + '"}',
                })
            
                .done(function(data) {
                    // Show formatted JSON on webpage.
                    $("#responseTextArea").val(JSON.stringify(data, null, 2));
                })
            
                .fail(function(jqXHR, textStatus, errorThrown) {
                    // Display error message.
                    var errorString = (errorThrown === "") ?
                        "Error. " : errorThrown + " (" + jqXHR.status + "): ";
                    errorString += (jqXHR.responseText === "") ?
                        "" : (jQuery.parseJSON(jqXHR.responseText).message) ?
                            jQuery.parseJSON(jqXHR.responseText).message :
                                jQuery.parseJSON(jqXHR.responseText).error.message;
                    alert(errorString);
                });
            };
        </script>

        <div id="container">
            <video autoplay="true" id = "videoElement">
            </video>
        </div>

        <h1>Detect Faces:</h1>
        Enter the URL to an image that includes a face or faces, then click
        the <strong>Analyze face</strong> button.<br><br>
        Image to analyze: <input type="text" name="inputImage" id="inputImage"
            value="https://upload.wikimedia.org/wikipedia/commons/c/c3/RH_Louise_Lillian_Gish.jpg" />
        <button onclick="processImage()">Analyze face</button><br><br>
        <div id="wrapper" style="width:1020px; display:table;">
            <div id="jsonOutput" style="width:600px; display:table-cell;">
                Response:<br><br>
                <textarea id="responseTextArea" class="UIInput"
                    style="width:580px; height:400px;"></textarea>
            </div>
            <div id="imageDiv" style="width:420px; display:table-cell;">
                Source image:<br><br>
                <img id="sourceImage" width="400" />
            </div>
        </div>

        <script type="text/javascript">
            var video = document.querySelector("#videoElement");
            navigator.getUserMedia=navigator.getUserMedia||navigator.
                webkitGetUsermedia||navigator.mozGetUserMedia||navigator.
                msGetUserMedia||navigator.oGetUserMedia;
            if (navigator.getUserMedia){
                navigator.getUserMedia({video:true}, handleVideo, videoError); 
            }

            function handleVideo(stream){
                video.srcObject = stream;
                video.play();
            //    
            
            }

            function videoError(e){
            }

        </script>
    </body>
</html>